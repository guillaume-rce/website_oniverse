{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n    return t;\n  };\n  return __assign.apply(this, arguments);\n};\nimport { pieces } from '../models/Piece';\nexport function create(minimumLength) {\n  return fill({\n    minimumLength: minimumLength,\n    queue: [],\n    bucket: []\n  });\n}\nfunction fill(pieceQueue) {\n  var local = [];\n  var bucket = pieceQueue.bucket;\n  while (local.length + pieceQueue.queue.length < pieceQueue.minimumLength) {\n    var _a = pullFromBucket(bucket),\n      piece = _a[0],\n      updatedBucket = _a[1];\n    local.push(piece);\n    bucket = updatedBucket;\n  }\n  return __assign(__assign({}, pieceQueue), {\n    queue: pieceQueue.queue.concat(local)\n  });\n}\nexport function getNext(pieceQueue) {\n  if (!pieceQueue.queue[0]) {\n    throw new Error('Unexpected empty queue');\n  }\n  var next = pieceQueue.queue[0];\n  var queue = pieceQueue.queue.slice(1);\n  return {\n    piece: next,\n    queue: fill(__assign(__assign({}, pieceQueue), {\n      queue: queue\n    }))\n  };\n}\nfunction pullFromBucket(bucket) {\n  var local = bucket.slice(0);\n  if (local.length === 0) {\n    // fill the bucket\n    pieces.forEach(function (piece) {\n      // 4 is just the number of each type of piece. it's arbitrary, not magic, okay.\n      for (var i = 0; i < 4; i++) {\n        local.push(piece);\n      }\n    });\n  }\n  var randomPiece = local.splice(randomNumber(local.length), 1)[0];\n  if (!randomPiece) {\n    console.error('bucket:', JSON.stringify(local));\n    throw new Error(\"Unexpected: failed to pull from bucket\");\n  }\n  return [randomPiece, local];\n}\nfunction randomNumber(under) {\n  return Math.floor(Math.random() * under);\n}","map":{"version":3,"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","pieces","create","minimumLength","fill","queue","bucket","pieceQueue","local","_a","pullFromBucket","piece","updatedBucket","push","concat","getNext","Error","next","slice","forEach","randomPiece","splice","randomNumber","console","error","JSON","stringify","under","Math","floor","random"],"sources":["C:/Users/groch/Documents/projets/futur/site_web/site-web-oniverse/node_modules/react-tetris/lib/modules/piece-queue.js"],"sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { pieces } from '../models/Piece';\nexport function create(minimumLength) {\n    return fill({\n        minimumLength: minimumLength,\n        queue: [],\n        bucket: []\n    });\n}\nfunction fill(pieceQueue) {\n    var local = [];\n    var bucket = pieceQueue.bucket;\n    while (local.length + pieceQueue.queue.length < pieceQueue.minimumLength) {\n        var _a = pullFromBucket(bucket), piece = _a[0], updatedBucket = _a[1];\n        local.push(piece);\n        bucket = updatedBucket;\n    }\n    return __assign(__assign({}, pieceQueue), { queue: pieceQueue.queue.concat(local) });\n}\nexport function getNext(pieceQueue) {\n    if (!pieceQueue.queue[0]) {\n        throw new Error('Unexpected empty queue');\n    }\n    var next = pieceQueue.queue[0];\n    var queue = pieceQueue.queue.slice(1);\n    return {\n        piece: next,\n        queue: fill(__assign(__assign({}, pieceQueue), { queue: queue }))\n    };\n}\nfunction pullFromBucket(bucket) {\n    var local = bucket.slice(0);\n    if (local.length === 0) {\n        // fill the bucket\n        pieces.forEach(function (piece) {\n            // 4 is just the number of each type of piece. it's arbitrary, not magic, okay.\n            for (var i = 0; i < 4; i++) {\n                local.push(piece);\n            }\n        });\n    }\n    var randomPiece = local.splice(randomNumber(local.length), 1)[0];\n    if (!randomPiece) {\n        console.error('bucket:', JSON.stringify(local));\n        throw new Error(\"Unexpected: failed to pull from bucket\");\n    }\n    return [randomPiece, local];\n}\nfunction randomNumber(under) {\n    return Math.floor(Math.random() * under);\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}