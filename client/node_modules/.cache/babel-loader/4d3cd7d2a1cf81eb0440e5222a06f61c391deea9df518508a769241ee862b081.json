{"ast":null,"code":"import React from 'react';\nimport Gameboard from './Gameboard';\nimport * as Game from '../models/Game';\nimport HeldPiece from './HeldPiece';\nimport PieceQueue from './PieceQueue';\nimport { Context } from '../context';\nimport { useKeyboardControls } from '../hooks/useKeyboardControls';\nvar defaultKeyboardMap = {\n  down: 'MOVE_DOWN',\n  left: 'MOVE_LEFT',\n  right: 'MOVE_RIGHT',\n  space: 'HARD_DROP',\n  z: 'FLIP_COUNTERCLOCKWISE',\n  x: 'FLIP_CLOCKWISE',\n  up: 'FLIP_CLOCKWISE',\n  p: 'TOGGLE_PAUSE',\n  c: 'HOLD',\n  shift: 'HOLD'\n};\n// https://harddrop.com/wiki/Tetris_Worlds#Gravity\nvar tickSeconds = function (level) {\n  return Math.pow(0.8 - (level - 1) * 0.007, level - 1);\n};\nexport default function Tetris(props) {\n  var _a;\n  var _b = React.useReducer(Game.update, Game.init()),\n    game = _b[0],\n    dispatch = _b[1];\n  var keyboardMap = (_a = props.keyboardControls) !== null && _a !== void 0 ? _a : defaultKeyboardMap;\n  useKeyboardControls(keyboardMap, dispatch);\n  var level = Game.getLevel(game);\n  React.useEffect(function () {\n    var interval;\n    if (game.state === 'PLAYING') {\n      interval = window.setInterval(function () {\n        dispatch('TICK');\n      }, tickSeconds(level) * 1000);\n    }\n    return function () {\n      window.clearInterval(interval);\n    };\n  }, [game.state, level]);\n  var controller = React.useMemo(function () {\n    return {\n      pause: function () {\n        return dispatch('PAUSE');\n      },\n      resume: function () {\n        return dispatch('RESUME');\n      },\n      hold: function () {\n        return dispatch('HOLD');\n      },\n      hardDrop: function () {\n        return dispatch('HARD_DROP');\n      },\n      moveDown: function () {\n        return dispatch('MOVE_DOWN');\n      },\n      moveLeft: function () {\n        return dispatch('MOVE_LEFT');\n      },\n      moveRight: function () {\n        return dispatch('MOVE_RIGHT');\n      },\n      flipClockwise: function () {\n        return dispatch('FLIP_CLOCKWISE');\n      },\n      flipCounterclockwise: function () {\n        return dispatch('FLIP_COUNTERCLOCKWISE');\n      },\n      restart: function () {\n        return dispatch('RESTART');\n      }\n    };\n  }, [dispatch]);\n  return React.createElement(Context.Provider, {\n    value: game\n  }, props.children({\n    HeldPiece: HeldPiece,\n    Gameboard: Gameboard,\n    PieceQueue: PieceQueue,\n    points: game.points,\n    linesCleared: game.lines,\n    state: game.state,\n    level: level,\n    controller: controller\n  }));\n}","map":{"version":3,"names":["React","Gameboard","Game","HeldPiece","PieceQueue","Context","useKeyboardControls","defaultKeyboardMap","down","left","right","space","z","x","up","p","c","shift","tickSeconds","level","Math","pow","Tetris","props","_a","_b","useReducer","update","init","game","dispatch","keyboardMap","keyboardControls","getLevel","useEffect","interval","state","window","setInterval","clearInterval","controller","useMemo","pause","resume","hold","hardDrop","moveDown","moveLeft","moveRight","flipClockwise","flipCounterclockwise","restart","createElement","Provider","value","children","points","linesCleared","lines"],"sources":["C:/Users/groch/Documents/projets/futur/site_web/site-web-oniverse/node_modules/react-tetris/lib/components/Tetris.js"],"sourcesContent":["import React from 'react';\nimport Gameboard from './Gameboard';\nimport * as Game from '../models/Game';\nimport HeldPiece from './HeldPiece';\nimport PieceQueue from './PieceQueue';\nimport { Context } from '../context';\nimport { useKeyboardControls } from '../hooks/useKeyboardControls';\nvar defaultKeyboardMap = {\n    down: 'MOVE_DOWN',\n    left: 'MOVE_LEFT',\n    right: 'MOVE_RIGHT',\n    space: 'HARD_DROP',\n    z: 'FLIP_COUNTERCLOCKWISE',\n    x: 'FLIP_CLOCKWISE',\n    up: 'FLIP_CLOCKWISE',\n    p: 'TOGGLE_PAUSE',\n    c: 'HOLD',\n    shift: 'HOLD'\n};\n// https://harddrop.com/wiki/Tetris_Worlds#Gravity\nvar tickSeconds = function (level) {\n    return Math.pow((0.8 - (level - 1) * 0.007), (level - 1));\n};\nexport default function Tetris(props) {\n    var _a;\n    var _b = React.useReducer(Game.update, Game.init()), game = _b[0], dispatch = _b[1];\n    var keyboardMap = (_a = props.keyboardControls) !== null && _a !== void 0 ? _a : defaultKeyboardMap;\n    useKeyboardControls(keyboardMap, dispatch);\n    var level = Game.getLevel(game);\n    React.useEffect(function () {\n        var interval;\n        if (game.state === 'PLAYING') {\n            interval = window.setInterval(function () {\n                dispatch('TICK');\n            }, tickSeconds(level) * 1000);\n        }\n        return function () {\n            window.clearInterval(interval);\n        };\n    }, [game.state, level]);\n    var controller = React.useMemo(function () { return ({\n        pause: function () { return dispatch('PAUSE'); },\n        resume: function () { return dispatch('RESUME'); },\n        hold: function () { return dispatch('HOLD'); },\n        hardDrop: function () { return dispatch('HARD_DROP'); },\n        moveDown: function () { return dispatch('MOVE_DOWN'); },\n        moveLeft: function () { return dispatch('MOVE_LEFT'); },\n        moveRight: function () { return dispatch('MOVE_RIGHT'); },\n        flipClockwise: function () { return dispatch('FLIP_CLOCKWISE'); },\n        flipCounterclockwise: function () { return dispatch('FLIP_COUNTERCLOCKWISE'); },\n        restart: function () { return dispatch('RESTART'); }\n    }); }, [dispatch]);\n    return (React.createElement(Context.Provider, { value: game }, props.children({\n        HeldPiece: HeldPiece,\n        Gameboard: Gameboard,\n        PieceQueue: PieceQueue,\n        points: game.points,\n        linesCleared: game.lines,\n        state: game.state,\n        level: level,\n        controller: controller\n    })));\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}